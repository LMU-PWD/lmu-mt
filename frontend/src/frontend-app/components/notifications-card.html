<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-styles/color.html">
<link rel="import" href="../shared/shared-styles.html">

<dom-module id="notifications-card">
    <template>
        <style include="shared-styles">
            :host {
                --custom-height: 100px;
                height: var(--custom-height);
                min-width: 320px;
                margin-top: 5px;
                display: block;
                background-color: var(--paper-blue-grey-100);
            }


            h1 {
                float: right;
                position: relative;
                top: 18px;
                width: 100px;
                margin-right: calc(50% - 50px);
                text-align: center;
            }

            .notification-head {
                height:80px;
                border-bottom: solid 2px var(--paper-blue-grey-900);
                /*width: 100%;
                height: 80px;
                border-bottom: solid 2px var(--paper-blue-grey-900);*/
            }

            .body {
                width: 100%;
                height: 290px;
                background-color: var(--paper-blue-grey-600);
            }

            .notification_icon {
                height: 64px;
                width: 64px;
                position: relative;
                margin: 18px calc(20% - 54px);
                float: left;
                border-radius: 50%;
                border: 2px solid var(--paper-blue-grey-900);
            }

            .notification_count {
                border-radius: 15px;
                height: 40%;
                width: 40%;
                font-size: 14px;
                font-weight: 100;
                background: var(--paper-red-500);
                text-align: center;
                line-height: 20px;
                border: solid 2px var(--paper-blue-grey-100);
                position: relative;
                top: -110%;
                left: 60%;
            }

            /*Tablet & Phone*/
            @media screen and (max-width: 1023px) {
                :host {

                    position: fixed;
                    top: 0;
                    left: 0;
                    z-index: 50;
                    background-color: transparent;
                    width: 100%;
                    border: none;
                    margin: 0;
                }

                .head {
                    border-bottom: none;
                }

                h1 {
                    display: none;
                }

                .notification_icon {
                    float: right;
                    height: 42px;
                    width: 42px;
                    border: none;
                    margin: 19px;
                }

                .body {
                    display: none;
                }
                div.active > .body {
                    display: block;
                }
                .notifications-container.active > body{
                    background-color: #fff;
                }
            }

            /*Desktop*/
            @media screen and (min-width: 1024px) {

            }
        </style>
        <div class="notifications-container">
            <div class="notification-head">
                <div class="notification_icon" on-tap="_handleNotifications">
                    <img src="../../../images/notifications.svg" alt="Notification Icon">
                    <div class="notification_count light-color-text">[[notificationCount]]</div>
                </div>
                <h1> Notifications</h1>
            </div>

            <div class="body">
                <template is="dom-repeat" items="[[notifications]]">
                    <div>
                        <p>[[item]]</p>
                    </div>
                </template>
            </div>
        </div>
    </template>

    <script>
        Polymer({

            is: 'notifications-card',

            properties: {

                notificationCount: {
                    type: Number,
                    value: 0
                },
                notifications: {
                    type: Array,
                    notify: true,
                    value: function () {
                        return [];
                    }
                },
                open: {
                    type: Boolean,
                    value: false,
                }
            },
            ready: function () {
                //For testing
                this.notifications = ['Gruppe beitreten', 'Fototermin anmelden', 'Gruppe beitreten', 'Fototermin anmelden', 'Gruppe beitreten', 'Fototermin anmelden', 'Gruppe beitreten', 'Fototermin anmelden', 'Gruppe beitreten', 'Fototermin anmelden', 'Gruppe beitreten', 'Fototermin anmelden', 'Gruppe beitreten', 'Fototermin anmelden'];
                this.notifications = ['Gruppe beitreten', 'Fototermin anmelden'];
                //this.notifications = [];
                this.notificationCount = this.notifications.length;
                console.log(this.notifications);
                console.log(this.notifications.length);
                if (!this.notifications.length) {
                    Polymer.dom(this.root).querySelector('div.notification_count').style.display = 'none';
                }
            },
            _handleNotifications: function () {
                Polymer.dom(this.root).querySelector('div.notifications-container').classList.toggle('active');
                Polymer.dom(this.root).querySelector('div.notification_icon > img').src =
                        (this.open)?( '../../../images/notifications.svg'):( '../../../images/notifications_active.svg');
                this.open = !this.open;
                console.log("Added class");
                Polymer.updateStyles();
            }

        });
    </script>
</dom-module>
