 <link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">

<script>
    const initialState = {
        friends: ["Peter","Hans","Monica"],
        userId: "",
        accessToken: "",
        user: {
            userID: "",
            groupID: "",
        },
        group: {
            name: "",
            members: [
                    {id:"",name:"", mail: ""}
            ],
            semesterId: "",
            labsIds: [],
            priorityIds: []
        },
        apiStuff: {},
        semester: {},
        session: {
            accessToken: null,
            loggedIn: false,
            userId: null
        }
    };

    /*const reducer = (state,action) => {
        if(!state) return initialState;
    };*/

    function reducer(state, action) {
        //console.log(state);
        if(!state){
            return initialState;
        }
        switch (action.type){
            case 'UPDATE_SESSION':
                const session = action.detail;
                console.log(session);
                console.log(Object.assign({}, state, {session: session}));
                return Object.assign({}, state, {session: session});
            case 'UPDATE_USER':
                const user = action.detail;
                return Object.assign({}, state, {user: user});
            case 'UPDATE_GROUP':
                const group = action.detail;
                //Change groupMemberIds to Array Containing Objects with ID, Name and Mail
                group.groupMemberIds.forEach(function (element) {
                    group.groupMemberIds.push({"id":group.groupMemberIds.shift(),"name":"","mail":""});
                });
                return Object.assign({}, state, {group: group});
            case 'RESET':
                return initialState;
            default: return state;
        }
    }

    const store = Redux.createStore(reducer);
    const ReduxBehavior = PolymerRedux(store);

</script>
<!--<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="redux-store">
    <template>
        <style>
            :host{
            }
        </style>
        <div></div>
    </template>
    <script>
        Polymer({
            is: 'redux-store',
            properties: {
            
            },
            ready: function() {
            
            }
        });
    </script>
</dom-module>-->